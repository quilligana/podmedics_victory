<script>
function getUserProgress()
{
  var stats = [];

  <% @percentiles.each_with_index do |percentile, index| %>
  stats[<%= index %>] = { value: <%= percentile %>, percentage: <%= index * 5 %> }
  <% end %>

  return stats;
}

function createChart() {
    $("#chart").kendoChart({
        chartArea: {
            background:"#F0F0F0",
        },
        title: {
            text: "Your performance compared to others in the community"
        },
        legend: {
            visible: false
        },
        dataSource: {
            data: getUserProgress()
        },
        series: [{
            type: "area",
            area: {
                line: {
                    style: "smooth"
                }
            },
            field: "value",
            categoryField: "percentage"
        }],
        categoryAxis: {
            baseUnit: "percentage"
        }
    });
}

function create_questionsChart() {
    $("#chart").kendoChart({
        title: {
            text: "Your performance compared to others in the community"
        },
        legend: {
            visible: false
        },
        seriesDefaults: {
            type: "area",
            area: {
                line: {
                    style: "smooth"
                }
            }
        },
        series: [{
            name: "Users",
            data: [0, 1100, 600, 300, 180, 120, 80, 30, 10, 0, 0]
        }],
        valueAxis: {
            majorGridLines: {
                visible: false
            },
            line: {
                visible: true
            },
            axisCrossingValue: -10
        },
        categoryAxis: {
            categories: [0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100],
            majorGridLines: {
                visible: false
            }
        }
    });
}



// $(document).ready(createChart);
$(document).ready(create_questionsChart);

</script>