<script>
function getUserProgress()
{
  var stats = [];

  <% (0..DASHBOARD_CHART_DAYS).each do |daysAgo| %>
  stats[<%= daysAgo %>] = { value: <%= current_user.daily_stat(daysAgo) %>, date: getDate(<%= daysAgo %>) }
  <% end %>

  return stats;
}

function getDate(daysAgo)
{
    var date = new Date();
    date.setDate(date.getDate() - daysAgo);
    return date
}

function createChart() {
    $("#chart").kendoChart({
        chartArea: {
            background:"#F0F0F0",
        },

        dataSource: {
            data: getUserProgress()
        },
        series: [{
            type: "line",
            aggregate: "avg",
            field: "value",
            categoryField: "date"
        }],
        categoryAxis: {

            baseUnit: "days"
        }
    });
}

function create_questionsChart() {
    $("#chart").kendoChart({
        title: {
            text: "Your performance compared to others in the community"
        },
        legend: {
            visible: false
        },
        seriesDefaults: {
                    type: "area",
                    area: {
                        line: {
                            style: "smooth"
                        }
                    }
                },
                series: [{
                    name: "Haiti",
                    data: [0, 11, 6, 3, 1.8, 1.2, 0.8, 0.3, 0.1, 0.0, 0]
                }],
                valueAxis: {
                    majorGridLines: {
                        visible: false
                    },
                    line: {
                        visible: true
                    },
                    axisCrossingValue: -10
                },
                categoryAxis: {
                    categories: [0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100],
                    majorGridLines: {
                        visible: false
                    }
                }
    });
}



// $(document).ready(createChart);
$(document).ready(create_questionsChart);

</script>